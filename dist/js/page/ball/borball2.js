LIT.define("comp/boreball/MovementBall",function(e){var t=function(e,t,n){var r=this;r.param={pointX:0,pointY:0,radius:100,time:1e3,color:"#000",ballRadius:10,x:0,y:0};if(t)for(var i in t)r.param[i]=t[i];n&&n(r),r.canvas=e,r.ctx=e.getContext("2d"),r.radius=r.param.ballRadius,r.init(),r.move()};return t.prototype={mometion:function(e){var t=this,n=e*360*Math.PI/180,r=Math.cos(n)*t.distance,i=Math.sin(n)*t.distance;return{x:t.param.pointX+r,y:t.param.pointY+i}},init:function(){var e=this;!e.param.x&&!e.param.y&&(e.x=e.param.pointX+e.param.radius-e.param.ballRadius/2,e.y=e.param.pointY),e.distance=Math.sqrt(Math.pow(Math.abs(e.x-e.param.pointX),2)+Math.pow(Math.abs(e.y-e.param.pointY),2))},move:function(e,t){var n=this;n.startTime||(n.startTime=Date.now()),t=t||Date.now();var r=t-n.startTime;e=e||r/n.param.time;var i=n.mometion(e,t);return i&&(n.x=i.x,n.y=i.y,n._draw()),i},_draw:function(){var e=this,t=e.ctx;t.beginPath(),t.arc(e.x,e.y,e.param.ballRadius,0,Math.PI*2,!1),t.fillStyle=e.param.color,t.lineWidth="1",t.fill(),t.closePath()},isStop:function(){return!1},destroy:function(){var e=this;e.ctx=null,e.canvas=null}},t}),LIT.define("comp/boreball/madeBalls",function(e){var t=e.require("comp/boreball/MovementBall");return function(n,r,i,s,o){var u={ballList:[],onDraw:[],init:function(e,t,n,r){var i=this;i.canvas=e,i.ctx=e.getContext("2d"),i.width=t,i.height=n,i.movefuns=r,i.param={pointX:250,pointY:150,radius:100,time:2e3};if(o)for(var s in o)i.param[s]=o[s]},create:function(e){var n=this,r=["#91caf1","#bad5de","#cbd2b3","#c0bf9d","#aba398","#818181","#929190"],i=function(e){var i={color:r[e]||"#929190",ballRadius:10};for(var s in n.param)i[s]=n.param[s];var o=new t(n.canvas,i,n.movefuns);n.ballList.push(o)},s=0,o=function(){if(e<=0)return;e--,i(s++),n.createTimeout=setTimeout(function(){o()},60)};o(),n.loop()},clearAll:function(){var e=this;e.ctx.clearRect(0,0,e.width,e.height)},_draw:function(){var e=this,t=e.ballList.length;e.start||(e.start=Date.now());var n=Date.now(),r=e.start-n,i=r/200;return i>1&&(i%=e.param.time),e.ballList.forEach(function(e,r){if(!e.isStop()){e.move(i,n);return}t--}),e.onDraw.forEach(function(t,n){t.apply(e)}),t>0},clear:function(){var e=this;e.createTimeout&&clearTimeout(e.createTimeout),e.ballList.length=0,e.clearAll()},loop:function(){var t=this;t.clearAll(),t._draw()&&e.nextFrame(function(){t.loop()})}};return u.init(n,r,i,s),u}}),LIT.define("comp/boreball/movfun/freeCircle",function(e){return function(e){var t={x:0,y:0},n={x:0,y:0,radius:100,endAngle:-180},r=588,i={step1:{st:0,ed:0,getValue:function(e){return e-=this.st,n.x+Math.cos(s*e/n.radius)*n.radius}},step2:{st:0,ed:0,getValue:function(e){return e-=this.st,n.x-Math.cos(s*e/n.radius)*n.radius}},defa:{getValue:function(e){if(e<i.step1.st||e>i.step2.ed)return t.x;if(e>i.step1.ed&&e<i.step2.st)return t.x-n.radius*2}}},s=0,o=0,u=0,a=function(e){return r*Math.pow(e,2)/2},f=function(e){return s*e-r*Math.pow(e,2)/2},l=function(e){return Math.sin(s*e/n.radius)*n.radius},c={step1:{st:0,ed:0,getValue:function(e){var n=a(e);return t.y+n}},step2:{st:0,ed:0,getValue:function(e){e-=this.st;var n=l(e);return t.y+u+n}},step3:{st:0,ed:0,getValue:function(e){e-=this.st;var n=f(e);return t.y+u-n}},step4:{st:0,ed:0,getValue:function(e){e-=this.st;var n=a(e);return t.y+n}},step5:{st:0,ed:0,getValue:function(e){e-=this.st;var n=l(e);return t.y+u+n}},step6:{st:0,ed:0,getValue:function(e){e-=this.st;var n=f(e);return t.y+u-n}}};e.init=function(){t.x=e.param.startX,t.y=e.param.startY,n.x=e.param.pointX,n.y=e.param.pointY,n.radius=e.param.radius;var a=n.y-t.y,f=Math.sqrt(2*a/r),l=r*f,h=n.radius*Math.PI/l;s=l,u=a,i.step1.st=f,i.step1.ed=f+h,i.step2.st=i.step1.ed+f*2,i.step2.ed=i.step2.st+h,c.step1.ed=f,c.step2.st=i.step1.st,c.step2.ed=i.step1.ed,c.step3.st=c.step2.ed,c.step3.ed=c.step3.st+f,c.step4.st=c.step3.ed,c.step4.ed=c.step4.st+f,c.step5.st=i.step2.st,c.step5.ed=i.step2.ed,c.step6.st=c.step5.ed,c.step6.ed=c.step5.ed+f,o=c.step6.ed};var h=function(e,t){var n=e.defa;for(var r in e){var i=e[r];if(i.st<=t&&t<=i.ed){n=i;break}}return n};e.mometion=function(t,n){n=n||Date.now(),n=(n-e.startTime)/1e3%o;var r=h(i,n),s=h(c,n),u=e.x,a=e.y;return r&&(u=r.getValue(n)),s&&(a=s.getValue(n)),{x:u,y:a}}}}),LIT.define("comp/boreball/circle",function(e){return function(t,n){var r={x:0,y:0,color:"red",radius:10,startAngle:0,endAngle:Math.PI*2};r=e.extend(r,n);var i={draw:function(){var e=t.getContext("2d");e.beginPath(),e.arc(r.x,r.y,r.radius,r.startAngle,r.endAngle,!1),e.strokeStyle=r.color,e.lineWidth="1",e.stroke(),e.closePath()}};return e.extend(i,r),i}}),LIT.define("page/ball/borball1",function(e){var t=e.require("comp/boreball/madeBalls"),n=e.require("comp/boreball/movfun/freeCircle"),r=e.require("comp/boreball/circle"),i=document.getElementById("canvas");if(!i.getContext)return;var s=t(i,i.width,i.height,n,{startX:350,startY:50,pointX:320,pointY:240,radius:30,ballRadius:5}),o=e("#range");s.create(o.val()),o.bind("change",function(){s.clear(),e("#showNumber").html(this.value),s.create(this.value)});var u=r(i,{x:320,y:240,color:"#818181",radius:32.5});u.draw(),s.onDraw.push(function(){u.draw()})})